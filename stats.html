<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Length</title>
</head>
<body>
    <h1>Track Length</h1>
    <p id="length">Calculating...</p>
    <a href="index.html">Back to Map</a>
    <!-- Turf.js for geospatial calculations -->
    <script src="https://unpkg.com/@turf/turf/turf.min.js"></script>
    <script>
        function calculateTrackLength(geojson) {
            var length = 0;
            geojson.features.forEach(function(feature) {
                if (feature.geometry.type === "LineString") {
                    length += turf.length(feature, {units: 'kilometers'});
                } else if (feature.geometry.type === "MultiLineString") {
                    feature.geometry.coordinates.forEach(function(line) {
                        length += turf.length(turf.lineString(line), {units: 'kilometers'});
                    });
                }
            });
            return length;
        }

        // Retrieve GeoJSON from localStorage
        var geojson = JSON.parse(localStorage.getItem('geojson'));

        // Calculate track length
        if (geojson) {
            var trackLength = calculateTrackLength(geojson);
            document.getElementById('length').textContent = trackLength.toFixed(2) + ' km';
        } else {
            document.getElementById('length').textContent = 'No track data available.';
        }
    </script>
</body>
</html>
