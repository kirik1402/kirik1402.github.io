<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Простая веб-страница</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .textarea-container {
            margin-top: 20px;
        }
        textarea {
            width: 50%; /* Ширина 50% от ширины экрана */
            min-height: 150px;
            resize: both; /* Позволяет изменять размер по горизонтали и вертикали */
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .button-container {
            margin-top: 10px;
        }
        .post-container {
            margin-top: 20px;
        }
        .post {
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 10px;
            margin-top: 10px;
            position: relative;
        }
        .post-time {
            font-size: 12px;
            color: #666;
        }
        .delete-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 4px;
        }
        .char-counter {
            margin-top: 5px;
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>Добро пожаловать на простую веб-страницу</h1>
    <div class="textarea-container">
        <label for="user-input">Введите текст ниже (макс. 200 символов):</label>
        <textarea id="user-input" placeholder="Введите ваш текст здесь..." oninput="updateCharCounter()"></textarea>
        <div class="char-counter" id="char-counter">0/200</div>
    </div>
    <div class="button-container">
        <button onclick="postText()">Запостить</button>
    </div>
    <div class="post-container" id="post-container">
        <!-- Здесь будут отображаться посты -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', loadPosts);

        function updateCharCounter() {
            const userInput = document.getElementById('user-input').value;
            const charCounter = document.getElementById('char-counter');
            charCounter.textContent = `${userInput.length}/200`;
        }

        function postText() {
            const userInput = document.getElementById('user-input').value;
            if (userInput.trim() === '') {
                alert('Пожалуйста, введите текст.');
                return;
            }
            if (userInput.length > 200) {
                alert('Превышено максимальное количество символов (200).');
                return;
            }

            const currentDateTime = new Date().toLocaleString();
            const post = {
                id: Date.now(), // Уникальный идентификатор поста
                text: userInput,
                time: currentDateTime
            };
            savePost(post);
            addPostToDOM(post);

            // Очищаем текстовое поле
            document.getElementById('user-input').value = '';
            updateCharCounter();
        }

        function savePost(post) {
            let posts = JSON.parse(localStorage.getItem('posts')) || [];
            posts.unshift(post); // Добавляем новый пост в начало массива
            localStorage.setItem('posts', JSON.stringify(posts));
        }

        function loadPosts() {
            const posts = JSON.parse(localStorage.getItem('posts')) || [];
            posts.forEach(post => {
                addPostToDOM(post);
            });
        }

        function addPostToDOM(post) {
            const postContainer = document.getElementById('post-container');

            // Создаем новый элемент поста
            const postElement = document.createElement('div');
            postElement.className = 'post';
            postElement.setAttribute('data-id', post.id);

            // Создаем элемент для текста поста
            const postText = document.createElement('p');
            postText.textContent = post.text;

            // Создаем элемент для времени публикации
            const postTime = document.createElement('p');
            postTime.className = 'post-time';
            postTime.textContent = `Опубликовано: ${post.time}`;

            // Создаем кнопку удаления поста
            const deleteButton = document.createElement('button');
            deleteButton.className = 'delete-button';
            deleteButton.textContent = 'Удалить';
            deleteButton.onclick = () => deletePost(post.id);

            // Добавляем текст, время и кнопку удаления в элемент поста
            postElement.appendChild(postText);
            postElement.appendChild(postTime);
            postElement.appendChild(deleteButton);

            // Добавляем новый пост в контейнер постов
            postContainer.insertBefore(postElement, postContainer.firstChild);
        }

        function deletePost(postId) {
            let posts = JSON.parse(localStorage.getItem('posts')) || [];
            posts = posts.filter(post => post.id !== postId);
            localStorage.setItem('posts', JSON.stringify(posts));
            removePostFromDOM(postId);
        }

        function removePostFromDOM(postId) {
            const postElement = document.querySelector(`.post[data-id='${postId}']`);
            if (postElement) {
                postElement.remove();
            }
        }
    </script>
</body>
</html>
